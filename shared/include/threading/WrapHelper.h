
#ifndef WRAP_HELPER_H
#define WRAP_HELPER_H

#include <exception>
#include "MessageData.h"

#define EXPAND(...) __VA_ARGS__

#define WH_INTERNAL_ARG_COUNT( \
    _0,  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, \
   _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, \
   _20, _21, _22, _23, _24, _25, _26, _27, _28, _29, \
   _30, _31, _32, _33, _34, _35, _36, _37, _38, _39, \
   _40, _41, _42, _43, _44, _45, _46, _47, _48, _49, \
   _50, _51, _52, _53, _54, _55, _56, _57, _58, _59, \
   _60, _61, _62, _63, _64, N, ...) N

#define WH_ARG_COUNT(...) EXPAND(WH_INTERNAL_ARG_COUNT(0, ##__VA_ARGS__,\
    64, 63, 62, 61, 60, \
    59, 58, 57, 56, 55, 54, 53, 52, 51, 50, \
    49, 48, 47, 46, 45, 44, 43, 42, 41, 40, \
    39, 38, 37, 36, 35, 34, 33, 32, 31, 30, \
    29, 28, 27, 26, 25, 24, 23, 22, 21, 20, \
    19, 18, 17, 16, 15, 14, 13, 12, 11, 10, \
     9,  8,  7,  6,  5,  4,  3,  2,  1,  0))


#define WH_ARG1(ARG1, ARG0, T, A) ARG0(T, A)
#define WH_ARG2(ARG1, ARG0, T, A, _1) ARG1(T, A) ARG0(T, _1) 
#define WH_ARG3(ARG1, ARG0, T, A, _1, _2) ARG1(T, A) WH_ARG2(ARG1, ARG0, T, _1, _2) 
#define WH_ARG4(ARG1, ARG0, T, A, _1, _2, _3) ARG1(T, A) WH_ARG3(ARG1, ARG0, T, _1, _2, _3)
#define WH_ARG5(ARG1, ARG0, T, A, _1, _2, _3, _4) ARG1(T, A) WH_ARG4(ARG1, ARG0, T, _1, _2, _3, _4) 
#define WH_ARG6(ARG1, ARG0, T, A, _1, _2, _3, _4, _5) ARG1(T, A) WH_ARG5(ARG1, ARG0, T, _1, _2, _3, _4, _5) 
#define WH_ARG7(ARG1, ARG0, T, A, _1, _2, _3, _4, _5, _6) ARG1(T, A) WH_ARG6(ARG1, ARG0, T, _1, _2, _3, _4, _5, _6) 
#define WH_ARG8(ARG1, ARG0, T, A, _1, _2, _3, _4, _5, _6, _7) ARG1(T, A) WH_ARG7(ARG1, ARG0, T, _1, _2, _3, _4, _5, _6, _7) 
#define WH_ARG9(ARG1, ARG0, T, A, _1, _2, _3, _4, _5, _6, _7, _8) ARG1(T, A) WH_ARG8(ARG1, ARG0, T, _1, _2, _3, _4, _5, _6, _7, _8) 
#define WH_ARG10(ARG1, ARG0, T, A, _1, _2, _3, _4, _5, _6, _7, _8, _9) ARG1(T, A) WH_ARG9(ARG1, ARG0, T, _1, _2, _3, _4, _5, _6, _7, _8, _9) 
#define WH_ARG11(ARG1, ARG0, T, A, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10)\
 ARG1(T, A) WH_ARG10(ARG1, ARG0, T, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10)
#define WH_ARG12(ARG1, ARG0, T, A, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11)\
 ARG1(T, A) WH_ARG11(ARG1, ARG0, T, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11)
#define WH_ARG13(ARG1, ARG0, T, A, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12)\
 ARG1(T, A) WH_ARG12(ARG1, ARG0, T, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12) 
#define WH_ARG14(ARG1, ARG0,T, A, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13)\
 ARG1(T, A) WH_ARG13(ARG1, ARG0, T, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13) 
#define WH_ARG15(ARG1, ARG0, T, A, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14)\
 ARG1(T, A) WH_ARG14(ARG1, ARG0, T, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14) 
#define WH_ARG16(ARG1, ARG0, T, A, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15)\
 ARG1(T, A) WH_ARG15(ARG1, ARG0, T, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15) 
#define WH_ARG17(ARG1, ARG0, T, A, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16)\
 ARG1(T, A) WH_ARG16(ARG1, ARG0, T, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16) 
#define WH_ARG18(ARG1, ARG0, T, A, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17)\
 ARG1(T, A) WH_ARG17(ARG1, ARG0, T, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17) 
#define WH_ARG19(ARG1, ARG0, T, A, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18)\
 ARG1(T, A) WH_ARG18(ARG1, ARG0, T, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18) 
#define WH_ARG20(ARG1, ARG0, T, A, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19)\
 ARG1(T, A) WH_ARG19(ARG1, ARG0, T, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19) 
#define WH_ARG21(ARG1, ARG0, T, A, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20)\
 ARG1(T, A) WH_ARG20(ARG1, ARG0, T, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20) 
#define WH_ARG22(ARG1, ARG0, T, A, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21)\
 ARG1(T, A) WH_ARG21(ARG1, ARG0, T, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21) 
#define WH_ARG23(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22\
) ARG1(T, A) WH_ARG22(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22\
) 
#define WH_ARG24(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23\
) ARG1(T, A) WH_ARG23(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23\
) 
#define WH_ARG25(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24\
) ARG1(T, A) WH_ARG24(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24\
) 
#define WH_ARG26(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25\
) ARG1(T, A) WH_ARG25(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25\
) 
#define WH_ARG27(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26\
) ARG1(T, A) WH_ARG26(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26\
)
#define WH_ARG28(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27\
) ARG1(T, A) WH_ARG27(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27\
)
#define WH_ARG29(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28\
) ARG1(T, A) WH_ARG28(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28\
) 
#define WH_ARG30(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29\
) ARG1(T, A) WH_ARG29(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29\
) 
#define WH_ARG31(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30\
) ARG1(T, A) WH_ARG30(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30\
)
#define WH_ARG32(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31\
) ARG1(T, A) WH_ARG31(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31\
)
#define WH_ARG33(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32\
) ARG1(T, A) WH_ARG32(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32\
) 
#define WH_ARG34(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33\
) ARG1(T, A) WH_ARG33(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33\
)
#define WH_ARG35(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34\
) ARG1(T, A) WH_ARG34(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34\
) 
#define WH_ARG36(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35\
) ARG1(T, A) WH_ARG35(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35\
) 
#define WH_ARG37(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36\
) ARG1(T, A) WH_ARG36(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36\
) 
#define WH_ARG38(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37\
) ARG1(T, A) WH_ARG37(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37\
) 
#define WH_ARG39(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38\
) ARG1(T, A) WH_ARG38(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38\
) 
#define WH_ARG40(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39\
) ARG1(T, A) WH_ARG39(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39\
) 
#define WH_ARG41(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40\
) ARG1(T, A) WH_ARG40(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40\
) 
#define WH_ARG42(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41\
) ARG1(T, A) WH_ARG41(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41\
) 
#define WH_ARG43(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42\
) ARG1(T, A) WH_ARG42(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42\
) 
#define WH_ARG44(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43\
) ARG1(T, A) WH_ARG43(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43\
) 
#define WH_ARG45(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44\
) ARG1(T, A) WH_ARG44(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44\
) 
#define WH_ARG46(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45\
) ARG1(T, A) WH_ARG45(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45\
) 
#define WH_ARG47(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46\
) ARG1(T, A) WH_ARG46(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46\
) 
#define WH_ARG48(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47\
) ARG1(T, A) WH_ARG47(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47\
) 
#define WH_ARG49(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48\
) ARG1(T, A) WH_ARG48(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48\
) 
#define WH_ARG50(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49\
) ARG1(T, A) WH_ARG49(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49\
) 
#define WH_ARG51(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50\
) ARG1(T, A) WH_ARG50(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50\
) 
#define WH_ARG52(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51\
) ARG1(T, A) WH_ARG51(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51\
) 
#define WH_ARG53(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52\
) ARG1(T, A) WH_ARG52(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52\
) 
#define WH_ARG54(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53\
) ARG1(T, A) WH_ARG53(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53\
) 
#define WH_ARG55(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53, _54\
) ARG1(T, A) WH_ARG54(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53, _54\
) 
#define WH_ARG56(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53, _54, _55\
) ARG1(T, A) WH_ARG55(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53, _54, _55\
) 
#define WH_ARG57(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53, _54, _55, _56\
) ARG1(T, A) WH_ARG56(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53, _54, _55, _56\
) 
#define WH_ARG58(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53, _54, _55, _56, _57\
) ARG1(T, A) WH_ARG57(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53, _54, _55, _56, _57\
) 
#define WH_ARG59(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53, _54, _55, _56, _57, _58\
) ARG1(T, A) WH_ARG58(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53, _54, _55, _56, _57, _58\
) 
#define WH_ARG60(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53, _54, _55, _56, _57, _58, _59\
) ARG1(T, A) WH_ARG59(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53, _54, _55, _56, _57, _58, _59\
) 
#define WH_ARG61(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53, _54, _55, _56, _57, _58, _59, _60\
) ARG1(T, A) WH_ARG60(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53, _54, _55, _56, _57, _58, _59, _60\
) 
#define WH_ARG62(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53, _54, _55, _56, _57, _58, _59, _60,\
 _61\
) ARG1(T, A) WH_ARG61(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53, _54, _55, _56, _57, _58, _59, _60,\
 _61\
) 
#define WH_ARG63(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53, _54, _55, _56, _57, _58, _59, _60,\
 _61, _62\
) ARG1(T, A) WH_ARG62(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53, _54, _55, _56, _57, _58, _59, _60,\
 _61, _62\
) 
#define WH_ARG64(ARG1, ARG0, T, A,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53, _54, _55, _56, _57, _58, _59, _60,\
 _61, _62, _63\
) ARG1(T, A) WH_ARG63(ARG1, ARG0, T,\
  _1,  _2,  _3,  _4,  _5,  _6,  _7,  _8,  _9, _10,\
 _11, _12, _13, _14, _15, _16, _17, _18, _19, _20,\
 _21, _22, _23, _24, _25, _26, _27, _28, _29, _30,\
 _31, _32, _33, _34, _35, _36, _37, _38, _39, _40,\
 _41, _42, _43, _44, _45, _46, _47, _48, _49, _50,\
 _51, _52, _53, _54, _55, _56, _57, _58, _59, _60,\
 _61, _62, _63\
)

    template<typename T> struct IsPointerType {
        enum { value = false };
    };

    template<typename T>
    struct IsPointerType<T*> {
        enum { value = true };
    };

    template<typename T>
    struct IsPointerType<std::shared_ptr<T> > {
        enum { value = true };
    };

    template<typename T>
    struct IsPointerType<std::weak_ptr<T> > {
        enum { value = true };
    };

    template<typename T>
    struct IsPointerType<std::unique_ptr<T> > {
        enum { value = true };
    };

    template<typename T>
    struct IsPointerType<std::auto_ptr<T> > {
        enum { value = true };
    };

    template<typename T>
    bool IsPointer(const T&) {
        return IsPointerType<T>::value;
    }


#define WH_CONCAT_(l, r) l ## r

#define WH_CONCAT(l, r) WH_CONCAT_(l, r)


#define WH_DECL_ARG1(T, A) decltype(WH_CONCAT(T, WH_CONCAT(::, A))) A{}; 

#define WH_GET_ARG1(T, A) A = object->##A; if(IsPointer(A)) { throw std::runtime_error("The \""#A "\" can't be an pointer. "); }

#define WH_SET_ARG1(T, A) object->##A = A; if(IsPointer(A)) { throw std::runtime_error("The \""#A "\" can't be an pointer. "); }


#define WH_PARAM_ARG0(T, A) const decltype(WH_CONCAT(T, WH_CONCAT(::, A)))& _##A
#define WH_PARAM_ARG1(T, A) const decltype(WH_CONCAT(T, WH_CONCAT(::, A)))& _##A,

#define WH_LIST_ARG0(T, A) A(_##A)
#define WH_LIST_ARG1(T, A) A(_##A),


#define WH_INNER_GET_CLS(CLS, T, DECL, GET) \
struct CLS : public thd::CReadData<T> \
{ \
    DECL \
 \
    virtual ~##CLS() {} \
    virtual void Process(util::CWeakPointer<const T> object) override { \
       GET \
    } \
}


#define WH_INNER_SET_CLS(CLS, T, DECL, SET, PARAM, LIST) \
class CLS : public thd::CWriteData<T> \
{ \
    DECL \
public:\
 \
    CLS(PARAM) : LIST {} \
    virtual ~##CLS() {} \
    virtual void Process(util::CWeakPointer<T> object) { \
        SET \
    } \
}

#define WH_INNER_GET(ARG, T, ...) WH_INNER_GET_CLS(WH_CONCAT(T,  __LINE__), T, ARG(WH_DECL_ARG1, WH_DECL_ARG1, T, __VA_ARGS__), ARG(WH_GET_ARG1, WH_GET_ARG1, T, __VA_ARGS__))

#define WH_INNER_SET(ARG, T, ...) WH_INNER_SET_CLS(WH_CONCAT(T,  __LINE__), T, ARG(WH_DECL_ARG1, WH_DECL_ARG1, T, __VA_ARGS__), ARG(WH_SET_ARG1, WH_SET_ARG1, T, __VA_ARGS__), ARG(WH_PARAM_ARG1, WH_PARAM_ARG0, T, __VA_ARGS__), ARG(WH_LIST_ARG1, WH_LIST_ARG0, T, __VA_ARGS__))


    /***
    *  @param1  T is a class name.
    *  @param2 ...  The attribute name of the class.
    */
#define WH_GET(T, ...) EXPAND(WH_INNER_GET(WH_CONCAT(WH_ARG, WH_ARG_COUNT(__VA_ARGS__)), T, ##__VA_ARGS__))

    /***
    *  @param1  T is a class name.
    *  @param2 ...  The attribute name of the class.
    */
#define WH_SET(T, ...) EXPAND(WH_INNER_SET(WH_CONCAT(WH_ARG, WH_ARG_COUNT(__VA_ARGS__)), T, ##__VA_ARGS__))


template<typename T, typename... Args>
util::CUniquePointer<T> MakeWH(Args&... arg)
{
    return util::CUniquePointer<T>(new util::WrapPoolIs <T>(arg...));
}

#endif // WRAP_HELPER_H